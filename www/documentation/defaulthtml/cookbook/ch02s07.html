<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.7.&nbsp;Generating documentation</title><link rel="stylesheet" href="look-and-feel.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.66.1"><link rel="start" href="index.html" title="Cookbook for Developers of ArgoUML"><link rel="up" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Building from source"><link rel="prev" href="ch02s06.html" title="2.6.&nbsp;Manual Test Cases"><link rel="next" href="ch02s08.html" title="2.8.&nbsp;Making a release"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.7.&nbsp;Generating documentation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s06.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;2.&nbsp;Building from source</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s08.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generating_documentation"></a>2.7.&nbsp;Generating documentation</h2></div></div></div><p>
This describes how the documentation is generated
i.e. both what to do and how the setup works.
</p><p>
If you are in a hurry:
</p><pre class="programlisting">
C:\Work&gt;set CVSROOT=:pserver:guest@cvs.tigris.org:/cvs
C:\Work&gt;cvs login   (use guest as password)
C:\Work&gt;cvs checkout argouml/documentation argouml/tools argouml/lib
C:\Work&gt;set JAVA_HOME=<i class="replaceable"><tt>C:\Programs\jdkwhatever</tt></i>
C:\Work&gt;cd argouml\documentation
C:\Work\argouml\documentation&gt;build defaulthtml
</pre><p>
The HTML version of the Cookbook, Quick Guide, and User Manual are
built and the result end up in.
<tt class="filename">C:\Work\argouml\build\documentation\defaulthtml\cookbook</tt>,
<tt class="filename">C:\Work\argouml\build\documentation\defaulthtml\quick-guide</tt>,
and
<tt class="filename">C:\Work\argouml\build\documentation\defaulthtml\manual</tt>
respectively.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
From here on it is the old text that is more or less "Publishing ArgoUML"
to be reworked.
</p></td></tr></table></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="how_the_web_site_works"></a>2.7.1.&nbsp;How the ArgoUML web site works</h3></div></div></div><a class="indexterm" name="d0e2098"></a><p>
Tigris provides the ArgoUML site to be edited through CVS. Everything
that is checked in under <tt class="filename">argouml/www</tt>
becomes immediately available at the URL 
<a href="http://argouml.tigris.org/" target="_top">http://argouml.tigris.org/</a>
with some added decorations.
</p><p>
Example: The file <tt class="filename">argouml/www/project.html</tt> is
available at 
<a href="http://argouml.tigris.org/project.html" target="_top">http://argouml.tigris.org/project.html</a>.
</p><p>
This is the way the site is maintained and updated.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2121"></a>2.7.2.&nbsp;The ArgoUML documentation</h3></div></div></div><a class="indexterm" name="d0e2124"></a><a class="indexterm" name="d0e2127"></a><p>
For the ArgoUML project the same documentation shall be available in both
HTML, PDF and JavaHelp. To this end the documentation is written in
DocBook XML and generated into two versions of HTML 
(one page per chapter and one page for the whole book),
PDF and JavaHelp.
</p><p>
We have tools that does the conversion from DocBook XML to HTML and PDF.
The conversion is done whenever you need to look at the result or when 
you want to present the final result on the web site.
</p><p>
There are currently three different books generated in this way,
each into its own directory. They are cookbook (this document), 
manual and quick-guide. They are all generated and stored in the
exact same way except for the name of the directory that is one
of <tt class="filename">cookbook</tt>,
<tt class="filename">manual</tt> or 
<tt class="filename">quick-guide</tt>.
Below I will reference these directories using
<tt class="filename"><i class="replaceable"><tt>book</tt></i></tt>.
</p><p>
When a new version of the documentation is to be made available on the
web site the responsible document release person does the following:
</p><div class="orderedlist"><ol type="1"><li><p>
He checks out everything needed
and a copy of the <tt class="filename">argouml/www</tt>.
</p><p>
If wanted, the CVS repository could be tagged and then the tag
can be checked out. This makes it possible to know exactly
how a certain version of the documentation was generated.
</p></li><li><a class="indexterm" name="d0e2163"></a><a class="indexterm" name="d0e2168"></a><p>
The documentation is generated using <span><b class="command">build docs</b></span>.
</p><p>
This generates all three books and the result appears in
<tt class="filename">argouml/build/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt>,
<tt class="filename">argouml/build/documentation/printablehtml/<i class="replaceable"><tt>book</tt></i></tt>, and
<tt class="filename">argouml/build/documentation/pdf/<i class="replaceable"><tt>book</tt></i></tt>.
</p><p>
This has been done several times before while preparing the release so
no problems are expected. If there are problems then the preparations
were not good enough and the process is best stopped right here.
</p></li><li><p>
All the old files are removed from the checked out copy of 
<tt class="filename">argouml/www/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt>, 
<tt class="filename">argouml/www/documentation/printablehtml/<i class="replaceable"><tt>book</tt></i></tt>.
</p></li><li><p>
New files are copied into the checked out copy of <tt class="filename">www</tt>
on top of the previous files there replacing them.
</p><p>
All the files are copied from
<tt class="filename">argouml/build/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt> to
<tt class="filename">argouml/www/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt>. 
The same for <tt class="filename">printablehtml</tt> and 
<tt class="filename">pdf</tt>.
</p></li><li><p>
No longer used files in 
<tt class="filename">argouml/www/documentation</tt>
are removed from CVS and new files are added.
</p><p><span><b class="command">cvs -n update</b></span></p><p>Watch for "Missing" and "Unknown" files.</p><p>
The missing files are scheduled to be removed by:
<span><b class="command">cvs remove <i class="replaceable"><tt>each of the missing files</tt></i></b></span>
</p><p>
The "Unknown" files are scheduled to be added by:
<span><b class="command">cvs add <i class="replaceable"><tt>each of the added files</tt></i></b></span>
</p><p>
This removing of missing files and adding of unknown files may seem
backward but it is from the perspective of CVS.
The missing files are the ones that were present in the previous
version of the documentation and do not have a replacement,
either because that chapter does not exist anymore or that the tool
generates filenames differently.
The Unknown files are files with filenames that for the same reason
appear from one version of the documentation to the next.
</p></li><li><p>
Commit the changes thus publishing it on the web site.
</p><p>
<span><b class="command">cvs commit -m'New version of the documentation published'</b></span>
</p></li><li><p>
The PDF book is uploaded to the download page.
</p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2270"></a>2.7.3.&nbsp;How we work with documentation</h3></div></div></div><a class="indexterm" name="d0e2273"></a><p>
The developers or authors that work with the documentation or with the tools 
to generate the documentation (or anyone else interested in how it works)
can generate the documentation like described above and examine
the result in
<tt class="filename">argouml/build</tt>.
It is only the last part about checking in and uploading the result
under
<tt class="filename">argouml/www/documentation</tt>
that requires write access in the CVS and 
some configuration management since it more or less is
releasing the manual.
</p><p>
In order to do this you need to check out the whole of the
<tt class="filename">argouml/documentation</tt> directory.
You also need the directory
<tt class="filename">argouml/lib</tt> and
<tt class="filename">argouml/tools</tt>
that contain the tools used: Ant, FOP, Saxon, ...
</p><p>
The subdirectories of
<tt class="filename">argouml/documentation</tt>,
<tt class="filename">cookbook</tt>,
<tt class="filename">manual</tt>, and
<tt class="filename">quick-guide</tt>
each contain one of the three books.
The subdirectory
<tt class="filename">docbook-setup</tt>
contains two things. 
It contains the configuration files that control how the generation is done.
It contains the XSL rules for all the generation.
The subdirectory
<tt class="filename">images</tt>
contains all the required pictures for all the books.
</p><p>
When, in the <tt class="filename">documentation</tt> you run
<span><b class="command">./build.sh defaulthtml</b></span> or one of the other targets that
builds the documentation,
all books are built.
What happens is (the target internal-dispatcher):
</p><div class="itemizedlist"><ul type="disc"><li><p>
The 
<tt class="filename"><i class="replaceable"><tt>manual</tt></i>/<i class="replaceable"><tt>argomanual.xml</tt></i></tt>
is copied by ant to
<tt class="filename"><i class="replaceable"><tt>manual</tt></i>/<i class="replaceable"><tt>argomanual-generated.xml</tt></i></tt>
while doing substitution of tokens:
(@VERSION@ to become the version as specified in 
<tt class="filename">default.properties</tt>)
</p></li><li><p>
The file 
<tt class="filename"><i class="replaceable"><tt>manual</tt></i>/<i class="replaceable"><tt>argomanual-generated.xml</tt></i></tt>
is processed by the special 
<tt class="filename">docbook-setup/create-imglist.xsl</tt>
xsl script that generates a list of included images.
</p></li><li><p>
All included images are copied.
</p><p>
The purpose of this is to only get the images actually used copied
with the document that uses them and not all images.
</p></li><li><p>
The HTML is generated by processing the file
<tt class="filename"><i class="replaceable"><tt>manual</tt></i>/<i class="replaceable"><tt>argomanual-generated.xml</tt></i></tt>.
</p></li></ul></div><p>
The file
<tt class="filename"><i class="replaceable"><tt>manual</tt></i>/<i class="replaceable"><tt>argomanual-generated.xml</tt></i></tt>
is a temporary file that only exists while processing the XML.
If editing the XML with a DocBook editors 
you open the file
<tt class="filename"><i class="replaceable"><tt>manual</tt></i>/<i class="replaceable"><tt>argomanual.xml</tt></i></tt>
and edit the unsubstituted file.
The differences between the unsubstituted file and the substituted file
are so small that it shouldn't make any difference.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s06.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s08.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.6.&nbsp;Manual Test Cases&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;2.8.&nbsp;Making a release</td></tr></table></div></body></html>