<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2020-02-29 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>argouml-core-umlpropertypanels - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20200229" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                argouml-core-umlpropertypanels
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2020-02-29</span>
                  &nbsp;| <span id="projectVersion">Version: 0.35.2-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="./" title="argouml-core-umlpropertypanels">argouml-core-umlpropertypanels</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="argouml-core">argouml-core</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                    <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="checkstyle.html" title="Checkstyle">Checkstyle</a>
            </li>
                      <li class="none">
                          <a href="jdepend-report.html" title="JDepend">JDepend</a>
            </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD Report">PMD Report</a>
            </li>
                      <li class="none">
            <strong>CPD Report</strong>
          </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>CPD Results<a name="CPD_Results"></a></h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.3.</p></div>
<div class="section">
<h2>Duplications<a name="Duplications"></a></h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/OldScrollList.java</td>
<td>126</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/ScrollListImpl.java</td>
<td>114</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public OldScrollList(JList alist) {
        setHorizontalScrollBarPolicy(
                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        this.list = (UMLLinkedList) alist;
        setViewportView(list);
    }
    
    public ListModel getListModel() {
        return list.getModel();
    }
    
    
    /**
     * Examine key event to scroll left or right depending on key press
     * @param e the key event to examine
     */
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            final Point posn = getViewport().getViewPosition();
            if (posn.x &gt; 0) {
                getViewport().setViewPosition(new Point(posn.x - 1, posn.y));
            }
        } else if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            final Point posn = getViewport().getViewPosition();
            if (list.getWidth() - posn.x &gt; getViewport().getWidth()) {
                getViewport().setViewPosition(new Point(posn.x + 1, posn.y));
            }
        }
    }

    public void keyReleased(KeyEvent arg0) {
    }

    public void keyTyped(KeyEvent arg0) {
    }
    
    public void addNotify() {
        super.addNotify();
        list.addKeyListener(this);
    }
    
    public void removeNotify() {
        super.removeNotify();
        list.removeKeyListener(this);
    }
    
    public JList getList() {
        return list;
    }
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/UMLExpressionModel.java</td>
<td>98</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLValueSpecificationModel.java</td>
<td>73</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public UMLExpressionModel(Object target, String name) {
        this.target = target;
        propertyName = name;
//        mustRefresh = true;
        startListeningForModelChanges();
    }

    protected void startListeningForModelChanges() {
	if (Model.getFacade().isAUMLElement(target)) {
	    Model.getPump().addModelEventListener(this, target,
		    propertyName);
	}
        LOG.log(Level.FINE, &quot;&gt;&gt;Start listening for UML changes...&quot;);
    }

    protected void stopListeningForModelChanges() {
	if (Model.getFacade().isAUMLElement(target)) {
	    Model.getPump().removeModelEventListener(this, target,
	                propertyName);
	}
        LOG.log(Level.FINE, &quot;&gt;&gt;Stop listening for UML changes...&quot;);
    }

    public void propertyChange(PropertyChangeEvent e) {
	if (propertyName.equals(e.getPropertyName())) {
	    if (rememberExpression != e.getNewValue()) {
		fireStateChanged();
                LOG.log(Level.FINE, &quot;&gt;&gt;UML expression changed.&quot;);
	    } else {
		/* This should not happen. */
                LOG.log(Level.FINE,</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/UMLTemplateParameterDefaultElementComboBoxModel.java</td>
<td>69</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLTemplateParameterParameterComboBoxModel.java</td>
<td>74</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        super(target, propertyName, true); // Allow null
    }

    /*
     * @see org.argouml.uml.ui.UMLComboBoxModel#isValidElement(Object)
     */
    protected boolean isValidElement(Object element) {
        return Model.getFacade().isAModelElement(element);
    }

    /*
     * @see org.argouml.uml.ui.UMLComboBoxModel#buildModelList()
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    protected void buildModelList() {
        Set&lt;Object&gt; elements = new TreeSet&lt;Object&gt;(new PathComparator());

        Project p = ProjectManager.getManager().getCurrentProject();
        if (p == null) {
            return;
        }
        
        for (Object model : p.getUserDefinedModelList()) {
            elements.addAll(Model.getModelManagementHelper()
                    .getAllModelElementsOfKind(
                            model, Model.getMetaTypes().getModelElement()));
        }

        elements.addAll(p.getProfileConfiguration().findByMetaType(
                        Model.getMetaTypes().getClassifier()));

        setElements(elements);
    }
    
    @SuppressWarnings(&quot;unchecked&quot;)
    @Override
    protected void buildMinimalModelList() {
        Collection list = new ArrayList(1);
        Object element = getSelectedModelElement();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/UMLExpressionModel.java</td>
<td>257</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLValueSpecificationModel.java</td>
<td>196</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>	startListeningForModelChanges();
    }

    /**
     * Adds a &lt;code&gt;ChangeListener&lt;/code&gt;.
     * The change listeners are run each
     * time the expression changes.
     *
     * @param l the ChangeListener to add
     * @see #removeChangeListener
     */
    public void addChangeListener(ChangeListener l) {
        listenerList.add(ChangeListener.class, l);
        LOG.log(Level.FINE, &quot;&gt;&gt;Add listener&quot;);
    }

    /**
     * Removes a &lt;code&gt;ChangeListener&lt;/code&gt;.
     *
     * @param l the &lt;code&gt;ChangeListener&lt;/code&gt; to remove
     * @see #addChangeListener
     */
    public void removeChangeListener(ChangeListener l) {
        listenerList.remove(ChangeListener.class, l);
        LOG.log(Level.FINE, &quot;&gt;&gt;Remove listener&quot;);
    }

    /**
     * Runs each &lt;code&gt;ChangeListener&lt;/code&gt;'s
     * &lt;code&gt;stateChanged&lt;/code&gt; method.
     *
     * @see #setRangeProperties
     * @see EventListenerList
     */
    protected void fireStateChanged() {
        LOG.log(Level.FINE, &quot;&gt;&gt;Fire state changed to listeners.&quot;);
        Object[] listeners = listenerList.getListenerList();
        for (int i = listeners.length - 2; i &gt;= 0; i -=2 ) {
            if (listeners[i] == ChangeListener.class) {
                if (changeEvent == null) {
                    changeEvent = new ChangeEvent(this);
                }
                ((ChangeListener)listeners[i+1]).stateChanged(changeEvent);
            }
        }
    }
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/model/GetterSetterManagerImpl.java</td>
<td>2090</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/model/GetterSetterManagerImpl.java</td>
<td>2344</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            return Model.getFacade().getClassifiers(modelElement);
        }

        public Object get(Object modelElement, Class&lt;?&gt; type) {
            // not needed
            return null;
        }

        public void set(Object element, Object x) {
            // not needed
        }

        public boolean isValidElement(Object element, Collection&lt;Class&lt;?&gt;&gt; types) {
            return getOptions(element, types).contains(element);
        }

        public Object getMetaType() {
            return Model.getMetaTypes().getClassifier();
        }

        public Command getAddCommand(Object modelElement) {
            return new AddCommand(modelElement);
        }

        public Command getRemoveCommand(Object modelElement, Object objectToRemove) {
    	    return new RemoveCommand(modelElement, objectToRemove);
        }

        private class AddCommand extends AddModelElementCommand {

            /**
             * Constructor for ActionAddPackageImport.
             */
            public AddCommand(Object target) {
                super(target);
            }

            protected List getChoices() {
                List list = new ArrayList();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/ExpressionModel.java</td>
<td>156</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLExpressionModel.java</td>
<td>180</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        return Model.getDataTypesHelper().getBody(expression);
    }

    /**
     * @param lang the language of the expression
     */
    public void setLanguage(String lang) {

	Object expression = getExpression();
        boolean mustChange = true;
        if (expression != null) {
            String oldValue =
                Model.getDataTypesHelper().getLanguage(expression);
            if (oldValue != null &amp;&amp; oldValue.equals(lang)) {
                mustChange = false;
            }
        }
        if (mustChange) {
            String body = EMPTYSTRING;
            if (expression != null
                    &amp;&amp; Model.getDataTypesHelper().getBody(expression) != null) {
                body = Model.getDataTypesHelper().getBody(expression);
            }

            setExpression(lang, body);
        }
    }

    /**
     * @param body the body text of the expression
     */
    public void setBody(String body) {

	Object expression = getExpression();
        boolean mustChange = true;
        if (expression != null) {
            Object oldValue = Model.getDataTypesHelper().getBody(expression);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/RowSelector.java</td>
<td>473</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/RowSelector.java</td>
<td>494</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public void mousePressed(MouseEvent e) {
        if (e.isPopupTrigger()) {
            JPopupMenu popup = new JPopupMenu();
            for (Object action : actions) {
                if (action instanceof Action) {
                    popup.add((Action) action);
                }
            }
            if (moveTopAction != null) {
                popup.add(moveTopAction);
                popup.add(moveBottomAction);
                popup.add(moveUpAction);
                popup.add(moveDownAction);
            }
            if (popup.getComponentCount() &gt; 0) {
                popup.show(this, e.getX(), e.getY());
            }
            e.consume();
        }
    }

    public void mouseReleased(MouseEvent e) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/model/GetterSetterManagerImpl.java</td>
<td>2294</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLStereotypeBaseClassListModel.java</td>
<td>151</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            }


            @Override
            protected void doIt(Collection selected) {
                Object stereo = getTarget();
                Set&lt;Object&gt; oldSet = new HashSet&lt;Object&gt;(getSelected());
                Set toBeRemoved = new HashSet&lt;Object&gt;(oldSet);

                for (Object o : selected) {
                    if (oldSet.contains(o)) {
                        toBeRemoved.remove(o);
                    } else {
                        Model.getExtensionMechanismsHelper()
                                .addBaseClass(stereo, o);
                    }
                }
                for (Object o : toBeRemoved) {
                    Model.getExtensionMechanismsHelper().removeBaseClass(stereo, o);
                }
            }
        }

        private class RemoveCommand</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/model/GetterSetterManagerImpl.java</td>
<td>1596</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/model/GetterSetterManagerImpl.java</td>
<td>1729</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            return Model.getMetaTypes().getReception();
        }

        public Command getAddCommand(Object modelElement) {
        	return new AddCommand(modelElement);
        }

        public Command getRemoveCommand(Object modelElement, Object objectToRemove) {
        	return new RemoveCommand(modelElement, objectToRemove);
        }

        private class AddCommand extends AddModelElementCommand {

            /**
             * Constructor for ActionAddPackageImport.
             */
            public AddCommand(final Object target) {
                super(target);
            }


            protected List getChoices() {
                List list = new ArrayList();
                /* TODO: correctly implement next function
                 * in the model subsystem for
                 * issue 1942: */
                Object model =
                    ProjectManager.getManager().getCurrentProject().getModel();
                list.addAll(Model.getModelManagementHelper()
                        .getAllModelElementsOfKind(model,
                            Model.getMetaTypes().getReception()));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/UMLActivityGraphContextComboBoxModel.java</td>
<td>69</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLStateMachineContextComboBoxModel.java</td>
<td>71</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public UMLActivityGraphContextComboBoxModel(String propertyName, final Object target) {
        super(target, propertyName, false);
    }

    /*
     * @see org.argouml.uml.ui.UMLModelElementListModel2#buildModelList()
     */
    protected void buildModelList() {
        Collection elements = new ArrayList();
        Project p = ProjectManager.getManager().getCurrentProject();
        for (Object model : p.getUserDefinedModelList()) {
            elements.addAll(Model
                    .getModelManagementHelper().getAllModelElementsOfKind(
                            model, Model.getMetaTypes().getClassifier()));
            elements.addAll(Model
                    .getModelManagementHelper().getAllModelElementsOfKind(
                            model, 
                            Model.getMetaTypes().getBehavioralFeature()));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/RowSelector.java</td>
<td>791</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/RowSelector.java</td>
<td>882</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                    ResourceLoaderWrapper.lookupIconResource(&quot;MoveDown&quot;));
            setEnabled(false);
        }

        /**
         * Set the action as enabled when any row other then the last is selected
         * @param e the event
         */
        public void valueChanged(ListSelectionEvent e) {
            final int index = getList().getSelectedIndex();
            setEnabled(index &gt; -1 &amp;&amp; index &lt; getModel().getSize() - 1);
        }

        /***
         * Perform the action
         * @param e the event
         */
        @Override
        public void actionPerformed(ActionEvent e) {
            super.actionPerformed(e);
            movedModelElement.setElement(getList().getSelectedValues()[0]);
            assert (movedModelElement != null);
            Model.getUmlHelper().move(
                    target,
                    movedModelElement.getElement(),
                    UmlHelper.Direction.DOWN);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/ExpressionBodyField.java</td>
<td>70</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLExpressionBodyField.java</td>
<td>89</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        String oldText = getText();
        String newText = model.getBody();

        if (oldText == null || newText == null || !oldText.equals(newText)) {
            if (oldText != newText) {
                setText(newText);
            }
        }
    }

    /*
     * @see javax.swing.event.DocumentListener#changedUpdate(javax.swing.event.DocumentEvent)
     */
    public void changedUpdate(final DocumentEvent p1) {
        model.setBody(getText());
    }

    /*
     * @see javax.swing.event.DocumentListener#removeUpdate(javax.swing.event.DocumentEvent)
     */
    public void removeUpdate(final DocumentEvent p1) {
        model.setBody(getText());
    }

    /*
     * @see javax.swing.event.DocumentListener#insertUpdate(javax.swing.event.DocumentEvent)
     */
    public void insertUpdate(final DocumentEvent p1) {
        model.setBody(getText());
    }
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/argouml/core/propertypanels/ui/UMLActivityGraphContextComboBoxModel.java</td>
<td>132</td></tr>
<tr class="a">
<td>org/argouml/core/propertypanels/ui/UMLStateMachineContextComboBoxModel.java</td>
<td>127</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        protected ActionSetContext() {
            super(Translator.localize(&quot;action.set&quot;), null);
            // Set the tooltip string:
            putValue(Action.SHORT_DESCRIPTION, 
                    Translator.localize(&quot;action.set&quot;));
        }

        /*
         * @see java.awt.event.ActionListener#actionPerformed(java.awt.event.ActionEvent)
         */
        public void actionPerformed(ActionEvent e) {
            super.actionPerformed(e);
            UMLComboBox source = (UMLComboBox) e.getSource();
            Object target = source.getTarget();
            if (Model.getFacade().getContext(target)
                    != source.getSelectedItem()) {
                Model.getStateMachinesHelper().setContext(
                        target, source.getSelectedItem());
            }
        }
    }
}</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2020.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
